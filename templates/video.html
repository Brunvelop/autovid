<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Video {{ short_num }}</title>
    <style>
        /* Estilos CSS para un diseño de tarjetas compacto */
        .scene-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: flex-start;
        }
        .scene {
            flex: 0 1 180px; /* Disminuye el ancho base de cada tarjeta */
            margin: 2px;      /* Reduce el margen entre tarjetas */
            border: 1px solid #ccc;
            padding: 5px;     /* Reduce el padding dentro de las tarjetas */
            box-sizing: border-box;
        }
        .scene img {
            max-width: 100%;
            height: auto;
        }
        .texts {
            margin-top: 5px;  /* Reduce el espacio entre la imagen y los textos */
        }
        .texts label {
            display: block;
            font-weight: bold;
            margin-top: 5px;  /* Reduce el espacio encima de las etiquetas */
            font-size: 0.85em; /* Reduce el tamaño de fuente */
        }
        .texts textarea {
            width: 100%;
            min-height: 35px; /* Reduce la altura mínima de las áreas de texto */
            resize: vertical;
            padding: 4px;     /* Reduce el padding dentro de las áreas de texto */
            box-sizing: border-box;
            font-size: 0.85em; /* Reduce el tamaño de fuente */
        }
        .scene button {
            margin-right: 3px;  /* Reduce el espacio entre botones */
            margin-top: 5px;    /* Reduce el espacio encima de los botones */
            padding: 4px 8px;   /* Reduce el padding dentro de los botones */
            font-size: 0.85em;  /* Reduce el tamaño de fuente */
            cursor: pointer;
        }
        @media (max-width: 600px) {
            .scene {
                flex: 0 1 30%; /* Ajusta el ancho de las tarjetas para pantallas más pequeñas */
            }
        }
        @media (max-width: 400px) {
            .scene {
                flex: 0 1 45%; /* Más ajustes para pantallas muy pequeñas */
            }
        }
        @media (max-width: 300px) {
            .scene {
                flex: 0 1 100%; /* Ancho completo en pantallas muy estrechas */
            }
        }
    </style>
</head>
<body>
    <h1>VIDEO {{ short_category }} {{ short_num }} {{ '✔️' if status['completed'] else '❌' }}</h1>
    <a href="{{ url_for('index') }}">Volver al inicio</a>
    <a href="{{ url_for('show_video', short_category=short_category, short_num=short_num|int - 1) }}">⬅️</a>
    <a href="{{ url_for('show_video', short_category=short_category, short_num=short_num|int + 1) }}">➡️</a>
    <div class="scene-container">
        {% for scene in scenes %}
        <div class="scene">
            <h2>{{ '✔️' if status['images_completed'][loop.index0] else '❌' }}</h2>
            <button onclick="location.href='{{ url_for('update_status', short_category=short_category, short_num=short_num, image_index=loop.index0, is_completed='false') }}'">❌</button>
            <button onclick="location.href='{{ url_for('update_status', short_category=short_category, short_num=short_num, image_index=loop.index0, is_completed='true') }}'">✔️</button>
            <img src="{{ scene.image_url }}">
            <div class="texts">
                <label for="text{{ loop.index }}">Narración:</label>
                <textarea id="text{{ loop.index }}" name="text{{ loop.index }}">{{ scene.text }}</textarea>
                <label for="image_prompt{{ loop.index }}">Prompt imagen:</label>
                <textarea id="image_prompt{{ loop.index }}" name="image_prompt{{ loop.index }}">{{ scene.image_prompt }}</textarea>
            </div>
            <button type="button" onclick="remakeScene({{ loop.index0 }})">Remake</button>
            <button type="button" onclick="remakeImage({{ loop.index0 }})">Remake Image</button>        </div>
        {% endfor %}
    </div>

    <!-- Funciones JavaScript opcionales para los botones -->
    <script>
        function remakeScene(index) {
            alert('Remake scene ' + index);
            // Implementa aquí la lógica para rehacer la escena
        }

        function remakeImage(index) {
            alert('Remake image for scene ' + index);
            // Implementa aquí la lógica para rehacer la imagen
        }
    </script>
</body>
</html>
